{% set current_page = "about" %}
{% extends "layouts/app.html" %}
{% block title %}Calendar | Month{% endblock %}
{% block content %}
<div class="container my-5">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <button class="btn btn-primary" onclick="changeMonth(-1)">May</button>
        <h2 id="calendar-title">June 2024</h2>
        <button class="btn btn-primary" onclick="changeMonth(1)">July</button>
      </div>
      <table class="table table-bordered">
        <thead class="table-dark">
          <tr>
            <th scope="col">Sun</th>
            <th scope="col">Mon</th>
            <th scope="col">Tue</th>
            <th scope="col">Wed</th>
            <th scope="col">Thu</th>
            <th scope="col">Fri</th>
            <th scope="col">Sat</th>
          </tr>
        </thead>
        <tbody id="calendar-body">
        </tbody>
      </table>
    </div>
    {% endblock %}

    <script>
      const currentDate = new Date();
      let displayedMonth = currentDate.getMonth();
      let displayedYear = currentDate.getFullYear();

      function generateCalendar(month, year) {
        const calendarBody = document.getElementById('calendar-body');
        calendarBody.innerHTML = '';

        const firstDay = new Date(year, month).getDay();
        const daysInMonth = new Date(year, month + 1, 0).getDate();

        let date = 1;
        for (let i = 0; i < 6; i++) {
          const row = document.createElement('tr');

          for (let j = 0; j < 7; j++) {
            const cell = document.createElement('td');
            if (i === 0 && j < firstDay) {
              cell.innerHTML = '';
            } else if (date > daysInMonth) {
              cell.innerHTML = '';
            } else {
              cell.innerHTML = date;
              if (date === currentDate.getDate() && month === currentDate.getMonth() && year === currentDate.getFullYear()) {
                cell.classList.add('bg-primary', 'text-white');
              }
              date++;
            }
            row.appendChild(cell);
          }

          calendarBody.appendChild(row);
        }

        document.getElementById('calendar-title').innerText = `${new Date(year, month).toLocaleString('default', { month: 'long' })} ${year}`;
      }

      function changeMonth(offset) {
        displayedMonth += offset;
        if (displayedMonth < 0) {
          displayedMonth = 11;
          displayedYear--;
        } else if (displayedMonth > 11) {
          displayedMonth = 0;
          displayedYear++;
        }
        generateCalendar(displayedMonth, displayedYear);
      }

      document.addEventListener('DOMContentLoaded', function() {
        generateCalendar(displayedMonth, displayedYear);
      });
    </script>
